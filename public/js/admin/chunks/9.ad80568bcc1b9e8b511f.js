webpackJsonp([9],{187:function(t,e,r){Vue.component("multiselect",r(143).default),t.exports={data:function(){return{user:{user_id:null,new_password:null,confirm_password:null},credit:null,credit_error:null,max:null,unpaid_mmk:null,unpaid_credit:null,unpaid_credit_error:null,loading:!1,rate:null,usd_rate:null,usd_error:!1,search:"",user_rates:[],countries:[],selected_country:null,country_error:!1,country_rate_error:!1,is_edit:!1,user_rate:{id:null,user_id:null,country_id:null,rate:null}}},methods:{getUrlParam:function(){var t=this,e=window.location.pathname.split("/");this.user.user_id=e[4],this.user_rate.user_id=e[4],axios.get("/admin/user/get-usd?id="+this.user.user_id).then(function(e){var r=e.data;t.rate=r}).catch(function(t){401==t.response.status||419==t.response.status?window.location.href="/admin/login":Notification.error("Error occured while getting data.")})},addCredit:function(){this.credit_error=!1,$("#credit_modal").modal("show")},saveCredit:function(){var t=this;if(""==this.credit||null==this.credit)return this.credit_error=!0,!1;axios.post("/admin/user/add-credit",{user_id:this.user.user_id,credit:this.credit}).then(function(e){var r=e.data;if(1==r.status)window.location.href="/admin/user/view/"+t.user.user_id;else{var i="";for(var s in r.message)r.message.hasOwnProperty(s)&&(i+=r.message[s]+"<br/>");Notification.error(i)}}).catch(function(t){401==t.response.status||419==t.response.status?window.location.href="/admin/login":Notification.error("Error occured while creating data.")})},setRate:function(){this.usd_error=!1,$("#usd_modal").modal("show")},saveRate:function(){var t=this;if(""==this.usd_rate||null==this.usd_rate)return this.usd_error=!0,!1;axios.post("/admin/user/update-usd",{id:this.user.user_id,usd_rate:this.usd_rate}).then(function(e){var r=e.data;if(1==r.status)t.rate=t.usd_rate,t.usd_error=!1,$("#usd_modal").modal("hide"),Notification.success("Success");else{var i="";for(var s in r.message)r.message.hasOwnProperty(s)&&(i+=r.message[s]+"<br/>");Notification.error(i)}}).catch(function(t){401==t.response.status||419==t.response.status?window.location.href="/admin/login":Notification.error("Error occured while creating data.")})},showPasswordModal:function(){this.cleanData(),$("#user_password_modal").modal("show")},cleanData:function(){this.user.new_password=null,this.user.confirm_password=null,this.$validator.reset()},validateData:function(){var t=this;this.$validator.validateAll().then(function(e){e&&t.submit()}).catch(function(t){console.log(t)})},submit:function(){axios.post("/admin/user/password/change",this.user).then(function(t){var e=t.data;if(1==e.status)$("#user_password_modal").modal("hide"),Notification.success("Success");else{var r="";for(var i in e.message)e.message.hasOwnProperty(i)&&(r+=e.message[i]+"<br/>");Notification.error(r)}}).catch(function(t){401==t.response.status||419==t.response.status?window.location.href="/admin/login":Notification.error("Error occured while creating data.")})},getUserRates:function(){var t=this;axios.get("/admin/user/rate/get?id="+this.user.user_id).then(function(e){var r=e.data;t.user_rates=r})},getCountries:function(){var t=this;axios.get("/admin/country/async").then(function(e){var r=e.data;t.countries=r})},showCountryModal:function(){this.cleanUserRate(),$("#country_modal").modal("show")},saveCountryRate:function(){var t=this;if(null!=this.selected_country&&(this.user_rate.country_id=this.selected_country.id),""==this.user_rate.country_id||null==this.user_rate.country_id?this.country_error=!0:this.country_error=!1,""==this.user_rate.rate||null==this.user_rate.rate?this.country_rate_error=!0:this.country_rate_error=!1,this.country_error||this.country_rate_error)return!1;var e=this.is_edit?"update":"add";axios.post("/admin/user/rate/"+e,this.user_rate).then(function(e){var r=e.data;if(r.status)t.getUserRates(),$("#country_modal").modal("hide"),Notification.success("Success");else{var i="";for(var s in r.message)r.message.hasOwnProperty(s)&&(i+=r.message[s]+"<br/>");Notification.error(i)}}).catch(function(t){console.log(t),401==t.response.status||419==t.response.status?window.location.href="/admin/login":Notification.error("Error occured while creating data.")})},showEditModal:function(t){this.cleanUserRate(),this.is_edit=!0,this.user_rate.id=t.id,this.user_rate.country_id=t.country_id,this.user_rate.rate=t.rate,$("#country_modal").modal("show")},showDeleteModal:function(t){this.cleanUserRate(),this.user_rate.id=t,$("#deleteModal").modal("show")},performDelete:function(){var t=this;axios.post("/admin/user/rate/delete/"+this.user_rate.id).then(function(e){e.data.success?(t.getUserRates(),$("#deleteModal").modal("hide"),Notification.success("Success")):Notification.warning("Oops! Something went wrong.")}).catch(function(t){Notification.error("Error occurred while deleting data.")})},cleanUserRate:function(){this.user_rate.id=null,this.user_rate.country_id=null,this.user_rate.rate=null,this.selected_country=null,this.country_error=!1,this.country_rate_error=!1,this.is_edit=!1},showInvoice:function(){var t=this;this.credit_error=!1,axios.get("/admin/user/unpaid/get?user_id="+this.user.user_id).then(function(e){var r=e.data;t.unpaid_mmk=(6*r).toLocaleString(),t.unpaid_credit=r,t.max=r.toLocaleString()}),$("#invoice_modal").modal("show")},calculateMMK:function(){this.unpaid_mmk=(6*this.unpaid_credit).toLocaleString()},sendInvoice:function(){var t=this;if(""==this.unpaid_credit||null==this.unpaid_credit)return this.unpaid_credit_error=!0,!1;this.loading=!0,axios.post("/admin/user/unpaid/send-invoice",{user_id:this.user.user_id,unpaid_credit:this.unpaid_credit}).then(function(e){var r=e.data;if(1==r.status)window.location.href="/admin/user/view/"+t.user.user_id;else{var i="";for(var s in r.message)r.message.hasOwnProperty(s)&&(i+=r.message[s]+"<br/>");Notification.error(i)}t.loading=!1}).catch(function(e){401==e.response.status||419==e.response.status?window.location.href="/admin/login":Notification.error("Error occured while creating data."),t.loading=!1})}},mounted:function(){this.getUrlParam(),this.getUserRates(),this.getCountries()}}}});