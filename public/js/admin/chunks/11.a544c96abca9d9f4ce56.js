webpackJsonp([11],{203:function(e,s,t){Vue.component("multiselect",t(143).default),e.exports={components:{VuePagination:function(e){return t.e(35).then(function(){var s=[t(215)];e.apply(null,s)}.bind(this)).catch(t.oe)}},data:function(){return{senders:[],sender_users:[],sender:{id:null,sender_name:null},search:"",edit:!1,pagination:{total:0,per_page:2,from:1,to:0,current_page:1,last_page:1},users:[],user_error:!1,userLoading:!1,selected_user:null,sender_user:{sender_id:null,user_id:null}}},methods:{getSenders:function(){var e=this;axios.get("/admin/sender/list?page="+this.pagination.current_page).then(function(s){var t=s.data;e.pagination=t,e.senders=t.data}).catch(function(e){console.log(e)})},searchClick:function(){this.pagination.current_page=1,this.filter()},filter:function(){var e=this;""==this.search?this.getSenders():axios.get("/admin/sender/search/"+this.search+"?page="+this.pagination.current_page).then(function(s){var t=s.data;e.pagination=t,e.senders=t.data}).catch(function(e){console.log(e)})},showAddModal:function(){this.clearData(),this.edit=!1,$("#senderModal").modal("show"),$("#sender_name").focus()},showEditModal:function(e){this.edit=!0,this.sender=Object.assign({},e),$("#senderModal").modal("show")},validateData:function(){var e=this;this.$validator.validateAll().then(function(s){if(s){var t=e.edit?"update":"create";axios.post("/admin/sender/"+t,e.sender).then(function(s){var t=s.data;t.success?(e.getSenders(),$("#senderModal").modal("hide"),Notification.success("Success")):e.showErrorMessages(t.message)}).catch(function(e){Notification.error("Error occurred while creating/updating data.")})}}).catch(function(e){console.log(e)})},clearData:function(){this.edit=!1,this.sender.id=null,this.sender.sender_name=null,this.$validator.reset()},showDeleteModal:function(e){this.clearData(),this.sender.id=e,$("#deleteModal").modal("show")},performDelete:function(){var e=this;axios.post("/admin/sender/delete",{id:this.sender.id}).then(function(s){var t=s.data;t.success?(e.pagination.current_page=1,e.getSenders(),$("#deleteModal").modal("hide"),Notification.success("Success")):Notification.warning(t.message)}).catch(function(e){Notification.error("Error occurred while deleting data.")})},showSenderUsers:function(e){var s=this;axios.get("/admin/sender/users/"+e).then(function(e){var t=e.data;s.sender_users=t,$("#usersModal").modal("show")}).catch(function(e){Notification.error("Error occurred while fetching data.")})},showAddUser:function(e){this.sender_user.sender_id=e.id,this.user_error=!1,this.selected_user=null,this.sender_user.user_id=null,$("#addUserModal").modal("show")},getUsers:function(e){var s=this;return this.userLoading=!0,axios.post("/admin/order/users",{name:e}).then(function(e){var t=e.data;s.users=t,s.userLoading=!1})},addUser:function(){var e=this;null!=this.selected_user?(this.user_error=!1,this.sender_user.user_id=this.selected_user.id,axios.post("/admin/sender/users/create",this.sender_user).then(function(s){var t=s.data;t.success?(e.getSenders(),$("#addUserModal").modal("hide"),Notification.success("Success")):e.showErrorMessages(t.message)}).catch(function(e){Notification.error("Error occurred while creating data.")})):this.user_error=!0},removeUser:function(e){var s=this;axios.post("/admin/sender/users/delete",{id:e.id}).then(function(e){e.data.success?(s.getSenders(),$("#usersModal").modal("hide"),Notification.success("Success")):Notification.warning("Oops! Something Went Wrong!")}).catch(function(e){Notification.error("Error occurred while deleting data.")})},showErrorMessages:function(e){var s="";for(var t in e)e.hasOwnProperty(t)&&(s+=e[t]+"<br/>");Notification.error(s)}},mounted:function(){this.getSenders()},computed:{usernameTab:function(){return{tabIndex:0}}}}}});