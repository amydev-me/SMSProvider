webpackJsonp([15],{183:function(o,t){o.exports={data:function(){return{packages:[],package:{id:null,packageName:null,credit:null,cost:null,currency_type:null},options:[{text:"Active",value:"1"},{text:"Inactive",value:"0"}],edit:!1,free:!1,edit_promo:!1,promotion:{id:null,package_id:null,promo_credit:null,promo_status:null,max_purchase:null}}},methods:{getPackages:function(){var o=this;axios.get("/admin/package/packages").then(function(t){var a=t.data;o.packages=a})},cleanData:function(){this.package.id=null,this.package.packageName=null,this.package.credit=null,this.package.cost=null,this.package.currency_type=null,this.$validator.reset()},showAddModal:function(){this.cleanData(),this.edit=!1,this.free=!1,$("#package_modal").modal("show"),$("#package_name").focus()},showEditModal:function(o){this.edit=!0,this.package=Object.assign({},o),"Free"==this.package.packageName?this.free=!0:this.free=!1,$("#package_modal").modal("show")},validateData:function(){var o=this;this.$validator.validateAll().then(function(t){t&&o.submit()}).catch(function(o){console.log(o)})},submit:function(){var o=this,t=this.edit?"update":"create";axios.post("/admin/package/"+t,this.package).then(function(t){var a=t.data;if(1==a.status)o.getPackages(),$("#package_modal").modal("hide"),Notification.success("Success");else{var i="";for(var e in a.message)a.message.hasOwnProperty(e)&&(i+=a.message[e]+"<br/>");Notification.error(i)}}).catch(function(o){401==o.response.status||419==o.response.status?window.location.href="/admin/login":Notification.error("Error occured while creating/updating data.")})},showPromotionModal:function(o){this.cleanPromotion(),this.edit_promo=!1,this.promotion.package_id=o.id,$("#promotion_modal").modal("show")},validatePromotion:function(){var o=this,t=this.edit_promo?"update":"create";axios.post("/admin/package/promotion/"+t,this.promotion).then(function(t){var a=t.data;if(1==a.status)o.getPackages(),$("#promotion_modal").modal("hide"),Notification.success("Success");else{var i="";for(var e in a.message)a.message.hasOwnProperty(e)&&(i+=a.message[e]+"<br/>");Notification.error(i)}}).catch(function(o){401==o.response.status||419==o.response.status?window.location.href="/admin/login":Notification.error("Error occured while creating/updating data.")})},viewPromotion:function(o){this.edit_promo=!0,this.promotion=Object.assign({},o),$("#promotion_modal").modal("show")},cleanPromotion:function(){this.promotion.id=null,this.promotion.package_id=null,this.promotion.promo_credit=null,this.promotion.promo_status=null,this.promotion.max_purchase=null},deletePromotionModal:function(o){this.cleanPromotion(),this.promotion.id=o,$("#deleteModal").modal("show")},performDelete:function(){var o=this;axios.post("/admin/package/promotion/delete/"+this.promotion.id).then(function(t){var a=t.data;a.success?(o.getPackages(),$("#deleteModal").modal("hide"),Notification.success("Success")):Notification.warning(a.message)}).catch(function(o){Notification.error("Error occurred while deleting data.")})}},mounted:function(){this.getPackages()}}}});